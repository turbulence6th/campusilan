<% if local[:mode] == 0 %>
<% advertable = "advertable" %>
<% elsif local[:mode] == 1 %>
<% advertable = "secondhand" %>
<% end %>

<%= form_for local[:advert], :url => local[:url] , :method => :post , :html => {
:class => 'form-basic ikinciel' , :id => 'ikincielform',
:multipart => true,
:onsubmit => 'return ikincielsubmit();'
} do |t| %>

<%= t.fields_for local[:advertable] do |field| %>

<% if local[:mode] == 1%>
<%= t.hidden_field :id %>
<% end %>

<div class="row form-group">
	<label class="control-label col-sm-2"> Alt Kategori</label>

	<div class="col-sm-10">
		<%= field.select :category, [['Beyaz Eşya', 'beyazesya'], ['Ev Dekorasyonu',
        'evdekorasyon'], ['Müzik Aletleri', 'muzikaletleri'], ['Elektronik', 'elektronik'], ['Kırtasiye', 'kirtasiye'],
      ['Mutfak Eşyaları', 'mutfakesyalari'], ['Vasıta', 'vasita'],['Giyim', 'giyim'],['Ders Notu', 'dersnotu'], ['Diğer', 'diger']],{}, {:class => " form-control"}  %>

	</div>
</div>

<div class = "row form-group">
	<label class = "col-sm-2 control-label">İlan Adı</label>

	<div class = "col-sm-10">
		<%= t.text_field :name, class:"form-control", :maxlength => 60, :onkeyup => 'ikincielilanadiVerify()' %>
	</div>
</div>

<div style="display:none;" class = 'ikincielAlert ikincielNameAlert col-xs-12 label label-danger form-group'>
	Lüften İlan Adı Giriniz
</div>

<div class = "row form-group">
	<label class = "col-sm-2 control-label">Fiyat</label>

	<div class = "col-sm-10">
		<%= t.text_field :price, class:"form-control", :maxlength => 7, :onkeyup => 'ikincielfiyatVerify()' %>
	</div>
</div>

<div style="display:none;"class = 'ikincielAlert ikincielPriceAlert col-xs-12 label label-danger form-group'>
	Geçersiz Fiyat Değeri
</div>

<div class = "row form-group">
	<label class = "col-sm-2 control-label">Ürün Rengi</label>

	<div class = "col-sm-10">
		<%= field.select :color, [['Renk Seçiniz', ''],['Siyah', 'siyah'], ['Beyaz', 'beyaz'], ['Kırmızı','kirmizi'],
		['Mavi', 'mavi'], ['Sarı', 'sari'], ['Yeşil', 'yesil']],{}, {class: "form-control"}  %>
	</div>
</div>

<div class = "row form-group">
	<label class = "col-sm-2 control-label">Marka</label>

	<div class = "col-sm-10">
		<%= field.text_field :brand ,class:"form-control", :onkeyup => 'ikincielmarkaVerify()'%>
	</div>
</div>

<div style="display:none;"class = 'ikincielAlert ikincielBrandAlert col-xs-12 label label-danger form-group'>
	Lütfen Marka Giriniz
</div>

<div class = "row form-group">
	<label class = "col-sm-2 control-label">Kullanım Durumu</label>

	<div class = "col-sm-10">
		<%= field.select :usage, [['Sıfır', 'true'], ['İkinci El', 'false']],{}, {class:"form-control"}  %>
	</div>
</div>

<div class = "row form-group">
	<label class = "col-sm-2 control-label">Garanti Durumu</label>

	<div class = "col-sm-10">
		<%= field.select :warranty, [['Var', 'true'], ['Yok', 'false']],{}, {class:"form-control"}  %>
	</div>
</div>

<div class = "row form-group">
	<label class = "col-sm-2 control-label">Açıklama</label>

	<div class = "col-sm-10">
		<%= t.text_area :explication, class:"form-control",rows: "5", :onkeyup => 'ikincielaciklamaVerify()'%>
	</div>
</div>

<div style="display:none;"class = 'ikincielAlert ikincielExplicationAlert col-xs-12 label label-danger form-group'>
	Lütfen Açıklama Giriniz
</div>

<br>

<div class="row">
	<%= file_field_tag 'images[]', :type => :file, :multiple => true, :class => 'file_image' %>
</div>

<% if local[:mode] == 0 %>
<div class = "row form-group">
	<div class = "col-sm-offset-2 col-sm-10">
		<div class = "checkbox">
			<label>
				<input type = "checkbox" id="kullanim" value="true">
				Kullanım koşullarını kabul ediyorum</label>
		</div>
	</div>
</div>
<div class = "row form-group">
	<div class = "col-sm-offset-2 col-sm-10">
		<%= t.submit 'İlan Ver',class:"btn btn-default" %>
	</div>
</div>
<% elsif local[:mode] == 1 %>
<% @images.each do |image|%>

<div class="image-<%= image.id %>">

	<%= image_tag image.imagefile(:small) %>

	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

	<a  style="cursor: pointer;" onclick="resimsil(<%= @advert.id %>,<%= image.id %>);" ><span style="font-size:20px;"class="glyphicon glyphicon-trash"></span></a>
	<br>
	<br>

</div>

<% end %>
<div class = "row form-group">
	<div class = "col-sm-offset-2 col-sm-10">
		<%= t.submit 'İlanı Güncelle',class:"btn btn-default" %>
	</div>
</div>
<%end%>

<% end %>
<% end %>

<script>
	function ikincielilanadiVerify() {
var form = document.getElementById("ikincielform");
var advertname = form.elements['advert_name'].value;
var result = false;

if (!/\S/.test(advertname)) {
$('.ikincielNameAlert').show();
} else {
$('.ikincielNameAlert').hide();
result = true;
}
return result;

}

function ikincielfiyatVerify() {
var form = document.getElementById("ikincielform");
var price = form.elements['advert_price'].value;
var result = false;

var priceRegexp = new RegExp('^[0-9]+$');
var check = priceRegexp.test(price);

if (!check) {
$('.ikincielPriceAlert').show();
} else {
$('.ikincielPriceAlert').hide();
result = true;
}
return result;
}

function ikincielmarkaVerify() {
var form = document.getElementById("ikincielform");
var brand = form.elements['advert_<%= advertable %>
	_brand'].value;
	var result = false;

	if (!/\S/.test(brand)) {
	$('.ikincielBrandAlert').show();
	} else {
	$('.ikincielBrandAlert').hide();
	result = true;
	}
	return result;
	}

	function ikincielaciklamaVerify() {
	var form = document.getElementById("ikincielform");
	var explication = form.elements['advert_explication'].value;
	var result = false;

	if (!/\S/.test(explication)) {
	$('.ikincielExplicationAlert').show();
	} else {
	$('.ikincielExplicationAlert').hide();
	result = true;
	}
	return result;
	}

	function ikincielsubmit() {

	var ilanadi = ikincielilanadiVerify();
	var fiyat = ikincielfiyatVerify();
	var marka = ikincielmarkaVerify();
	var aciklama = ikincielaciklamaVerify();

<% if local[:mode] == 0 %>
	var kullanim = $("#ikincielform #kullanim").is(":checked");
	return ilanadi && fiyat && marka && aciklama && kullanim;
<% elsif local[:mode] == 1 %>
	return ilanadi && fiyat && marka && aciklama;
<% end %>}</script>